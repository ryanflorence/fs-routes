/** @license React vundefined
 * react-interactions-events/tap.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';var l=require("react"),n="undefined"!==typeof window&&void 0!==window.PointerEvent;"undefined"!==typeof window&&null!=window.navigator&&/^Mac/.test(window.navigator.platform);var p={none:0,primary:1,secondary:2,auxiliary:4};function q(b,c){if(null!=c){b=b.changedTouches;for(var d=0;d<b.length;d++){var a=b[d];if(a.identifier===c)return a}}return null}function r(b){b=b.nativeEvent;var c=b.ctrlKey,d=b.metaKey,a=b.shiftKey;return!0===b.altKey||!0===c||!0===d||!0===a}
var u=n?"click_active contextmenu pointerup pointermove pointercancel scroll".split(" "):"click_active contextmenu mouseup mousemove dragstart touchend touchmove touchcancel scroll".split(" ");
function v(b,c,d,a){b=b.getTimeStamp();a=a.nativeEvent;return{altKey:a.altKey,ctrlKey:a.ctrlKey,height:a.height,metaKey:a.metaKey,pageX:a.pageX,pageY:a.pageY,pointerType:a.pointerType,pressure:a.pressure,screenX:a.screenX,screenY:a.screenY,shiftKey:a.shiftKey,tangentialPressure:a.tangentialPressure,target:d.responderTarget,tiltX:a.tiltX,tiltY:a.tiltY,timeStamp:b,twist:a.twist,width:a.width,x:a.clientX,y:a.clientY}}
function w(b,c,d,a){b=b.getTimeStamp();var e=a.nativeEvent,f=a.type;c=e.altKey;var g=e.ctrlKey,h=e.metaKey,J=e.shiftKey,m="dragstart"===f||"touchcancel"===f;f="mouseup"===f||"touchend"===f;var A="touch"===a.pointerType,t=e;!n&&A&&(e=q(e,d.activePointerId),null!=e&&(t=e));var k=t;e=k.pageX;t=k.pageY;var B=k.radiusX,C=k.radiusY,D=k.rotationAngle,K=k.screenX,L=k.screenY,M=k.clientX;k=k.clientY;return{altKey:c,ctrlKey:g,height:m||null==C?1:2*C,metaKey:h,pageX:m?0:e,pageY:m?0:t,pointerType:a.pointerType,
pressure:f||m?0:A?1:.5,screenX:m?0:K,screenY:m?0:L,shiftKey:J,tangentialPressure:0,target:d.responderTarget,tiltX:0,tiltY:0,timeStamp:b,twist:null!=D?D:0,width:m||null==B?1:2*B,x:m?0:M,y:m?0:k}}var x=n?v:w;function y(b,c){null!=c.rootEvents&&(b.removeRootEventTypes(c.rootEvents),c.rootEvents=null)}function z(b,c){var d=b.nativeEvent,a=c.activePointerId;return n?(d=d.pointerId,null!=a&&null!=d?c.pointerType===b.pointerType&&a===d:!0):"touch"===b.pointerType?null!=q(d,a):!0}
function E(b,c){return b===p.auxiliary||b===p.primary&&c.metaKey||b===p.primary&&c.shiftKey}function F(b,c,d){c=c.onTapChange;null!=c&&b.dispatchEvent(d.isActive,c,0)}function G(b,c,d){var a=c.onTapCancel;F(b,c,d);null!=a&&(c=b.objectAssign({},d.gestureState,{type:"tap:cancel"}),b.dispatchEvent(c,a,0))}function H(b,c,d){c=c.onAuxiliaryTap;null!=c&&(d=b.objectAssign({},d.gestureState,{defaultPrevented:!1,type:"tap:auxiliary"}),b.dispatchEvent(d,c,0))}
var I=l.unstable_createResponder("Tap",{targetEventTypes:n?["pointerdown"]:["mousedown","touchstart"],getInitialState:function(){return{activePointerId:null,buttons:0,ignoreEmulatedEvents:!1,isActive:!1,isAuxiliaryActive:!1,initialPosition:{x:0,y:0},pointerType:"",responderTarget:null,rootEvents:null,shouldPreventDefault:!0,gestureState:{altKey:!1,ctrlKey:!1,height:1,metaKey:!1,pageX:0,pageY:0,pointerType:"",pressure:0,screenX:0,screenY:0,shiftKey:!1,tangentialPressure:0,target:null,tiltX:0,tiltY:0,
timeStamp:0,twist:0,width:1,x:0,y:0}}},onEvent:function(b,c,d,a){if(d.disabled)y(c,a),a.isActive&&(a.isActive=!1,G(c,d,a));else{var e=b.nativeEvent,f=e.target,g=b.type;switch(g){case "pointerdown":case "mousedown":case "touchstart":if(n){var h=e.pointerId;a.activePointerId=h;f.releasePointerCapture(h)}else if("touchstart"===g&&(f=e.targetTouches,0<f.length&&(a.activePointerId=f[0].identifier)),"mousedown"===g&&a.ignoreEmulatedEvents)break;if(!a.isActive){f=b.nativeEvent.buttons===p.primary;f="touch"===
b.pointerType||f&&!r(b);h=E(e.buttons,e);if(f||h)a.buttons=e.buttons,a.pointerType=b.pointerType,a.responderTarget=c.getResponderNode(),a.rootEvents||(a.rootEvents=u,c.addRootEventTypes(a.rootEvents)),n||"touchstart"!==g||(a.ignoreEmulatedEvents=!0);f?(b=x(c,d,a,b),a.isActive=!0,a.shouldPreventDefault=!1!==d.preventDefault,a.gestureState=b,a.initialPosition.x=b.x,a.initialPosition.y=b.y,b=d.onTapStart,null!=b&&(e=c.objectAssign({},a.gestureState,{type:"tap:start"}),c.dispatchEvent(e,b,0)),F(c,d,a)):
h&&(a.isAuxiliaryActive=!0)}}}},onRootEvent:function(b,c,d,a){var e=b.nativeEvent,f=b.type;if(n||"touch"!==b.pointerType)var g=b.target;else{g=c.getActiveDocument();var h=q(b.nativeEvent,a.activePointerId);g=null!=h?g.elementFromPoint(h.clientX,h.clientY):null}switch(f){case "pointermove":case "mousemove":case "touchmove":if(!n&&"mousemove"===f&&a.ignoreEmulatedEvents)break;a.isActive&&z(b,a)&&(a.gestureState=x(c,d,a,b),f=!0,c.isTargetWithinResponder(g)?null!=d.maximumDistance&&10<=d.maximumDistance&&
(e=a.initialPosition,g=a.gestureState,b=e.x-g.x,e=e.y-g.y,Math.sqrt(b*b+e*e)>d.maximumDistance&&(f=!1)):f=!1,f?(d=d.onTapUpdate,null!=d&&(a=c.objectAssign({},a.gestureState,{type:"tap:update"}),c.dispatchEvent(a,d,1))):(a.isActive=!1,G(c,d,a)));break;case "pointerup":case "mouseup":case "touchend":a.isActive&&z(b,a)?(a.gestureState=x(c,d,a,b),a.isActive=!1,E(a.buttons,e)?(G(c,d,a),H(c,d,a),y(c,a)):!c.isTargetWithinResponder(g)||r(b)?G(c,d,a):(b=d.onTapEnd,F(c,d,a),null!=b&&(d=c.objectAssign({},a.gestureState,
{defaultPrevented:!0===a.shouldPreventDefault,type:"tap:end"}),c.dispatchEvent(d,b,0)))):a.isAuxiliaryActive&&E(a.buttons,e)&&(a.isAuxiliaryActive=!1,a.gestureState=x(c,d,a,b),H(c,d,a),y(c,a));n||"mouseup"!==f||(a.ignoreEmulatedEvents=!1);break;case "contextmenu":case "pointercancel":case "touchcancel":case "dragstart":a.isActive&&z(b,a)&&(a.gestureState=x(c,d,a,b),a.isActive=!1,G(c,d,a),y(c,a));break;case "scroll":a.isActive&&null!=a.responderTarget&&"mouse"!==a.pointerType&&c.isTargetWithinNode(a.responderTarget,
e.target)&&(a.gestureState=x(c,d,a,b),a.isActive=!1,G(c,d,a),y(c,a));break;case "click":a.shouldPreventDefault&&e.preventDefault(),y(c,a)}},onUnmount:function(b,c,d){y(b,d);d.isActive&&(d.isActive=!1,G(b,c,d))}});module.exports={TapResponder:I,useTap:function(b){return l.unstable_useResponder(I,b)}};
